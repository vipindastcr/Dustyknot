<!DOCTYPE html>
<html class="no-js" lang="en">


<!-- Mirrored from wp.alithemes.com/html/evara/evara-frontend/page-account.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 15 Jul 2023 10:11:15 GMT -->
<head>
    <meta charset="utf-8">
    <title>Dustyknot clothing</title>
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta property="og:title" content="">
    <meta property="og:type" content="">
    <meta property="og:url" content="">
    <meta property="og:image" content="">
    <!-- Favicon -->
    <link rel="shortcut icon" type="image/x-icon" href="/imgs/theme/Dustyknot_logo_favicon.png">
    <!-- Template CSS -->
    <link rel="stylesheet" href="/assets/css/maind134.css?v=3.4">

    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/toastify-js/1.6.1/toastify.min.css">
    <!-- Include SweetAlert from CDN -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

</head>

<body>
    <!-- header attaching -->
    

    <%- include('header') %>

    
    <main class="main">
        <div class="page-header breadcrumb-wrap">
            <div class="container">
                <div class="breadcrumb">
                    <a href="/" rel="nofollow">Home</a>
                    <span></span><a href="/fashion">Shop</a> 
                    <span></span> Account
                </div>
            </div>
        </div>
        <section class="pt-150 pb-150">
            <div class="container">
                <div class="row">
                    <div class="col-lg-10 m-auto">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="dashboard-menu">
                                    <ul class="nav flex-column" role="tablist">
                                        <li class="nav-item">
                                            <a class="nav-link active" id="dashboard-tab" data-bs-toggle="tab"
                                                href="#dashboard" role="tab" aria-controls="dashboard"
                                                aria-selected="false"><i
                                                    class="fi-rs-settings-sliders mr-10"></i>Dashboard</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" id="account-detail-tab" data-bs-toggle="tab"
                                                href="#account-detail" role="tab" aria-controls="account-detail"
                                                aria-selected="true"><i class="fi-rs-user mr-10"></i>Account details</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" id="orders-tab" data-bs-toggle="tab" href="#orders"
                                                role="tab" aria-controls="orders" aria-selected="false"><i
                                                    class="fi-rs-shopping-bag mr-10"></i>Orders</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" id="add-address-tab" data-bs-toggle="tab"
                                                href="#add-address" role="tab" aria-controls="address"
                                                aria-selected="true"><i class="fi-rs-marker mr-10"></i>Add Address</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" id="account-security-tab" data-bs-toggle="tab"
                                                href="#account-security" role="tab" aria-controls="account-security"
                                                aria-selected="false"><i class="fi-rs-user mr-10"></i>Account
                                                security</a>
                                        </li>
                                        <li class="nav-item">
                                            <a class="nav-link" id="address-tab" data-bs-toggle="tab" href="#address"
                                                role="tab" aria-controls="add-address" aria-selected="true"><i
                                                    class="fi-rs-marker mr-10"></i>My Address</a>
                                        </li>

                                        <!-- <li class="nav-item">
                                            <a class="nav-link" id="wallet-detail-tab" data-bs-toggle="tab"
                                                href="#wallet" role="tab" aria-controls="wallet-detail"
                                                aria-selected="true"><i class="fi-rs-user mr-10"></i>Wallet</a>
                                        </li>    -->

                                        <li class="nav-item">
                                            <a class="nav-link" href="/logout"><i
                                                    class="fi-rs-sign-out mr-10"></i>Logout</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="col-md-8">
                                <div class="tab-content dashboard-content">
                                    <div class="tab-pane fade active show" id="dashboard" role="tabpanel"
                                        aria-labelledby="dashboard-tab">
                                        <div class="card">
                                            <div class="card-header">
                                                <h5 class="mb-0">Hello <%= userData.name %>
                                                </h5>
                                            </div>
                                            <div class="card-body">
                                                <p>From your account dashboard. you can easily check &amp; view your <a
                                                        href="#">recent orders</a>, manage your <a href="#">shipping and
                                                        billing addresses</a> and <a href="#">edit your password and
                                                        account details.</a></p>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="tab-pane fade" id="orders" role="tabpanel" aria-labelledby="orders-tab">
                                        <div class="card">
                                            <div class="card-header">
                                                <h5 class="mb-0">Your Orders</h5>
                                            </div>
                                            <div class="card-body ">
                                                <div class="table-responsive container">
                                                    <table class="table" id="orderTable">
                                                        <thead>
                                                            <tr>
                                                                <th>Order</th>
                                                                <th>Date</th>

                                                                <th>Total</th>

                                                                <th>View</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <% orderDetails.forEach(element=> { %>
                                                                <tr>
                                                                    <td>#<%= element.orderId %>
                                                                    </td>
                                                                    <td>
                                                                        <%= element.formattedDate %>
                                                                    </td>

                                                                    <td>
                                                                        <%= element.formattedTotal %> for <%=
                                                                                element.quantity %> item
                                                                    </td>

                                                                    <td>
                                                                    
                                                                        <a href="/orderDetails/<%=element._id%>"
                                                                            class="btn-small d-block text-primary">View</a>
                                                                    </td>
                                                                </tr>

                                                                <% }) %>


                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="tab-pane fade" id="account-detail" role="tabpanel"
                                        aria-labelledby="account-detail-tab">
                                        <div class="card">
                                            <div class="card-header">
                                                <h5>Account Details</h5>
                                            </div>
                                            <div class="card-body">
                                                <form method="post" name="enq" id="userDetailsForm">
                                                    <div class="row">
                                                        <div class="form-group col-md-6">
                                                            <label>Name <span class="required">*</span></label>
                                                            <input required="" class="form-control square" name="name"
                                                                type="text" id="name" value="<%= userData.name %>">
                                                            <span id="nameError" class="text-danger"></span>
                                                        </div>
                                                        <div class="form-group col-md-6">
                                                            <label>Email Address <span class="required">*</span></label>
                                                            <input required="" class="form-control square" name="email"
                                                                type="email" id="email" value="<%= userData.email %>"
                                                                readonly>
                                                            <span id="emailError" class="text-danger"></span>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="form-group col-md-6">
                                                            <label>Mobile No: <span class="required">*</span></label>
                                                            <input required="" class="form-control square" name="mobile"
                                                                type="number" id="mobile"
                                                                value="<%= userData.mobile %>">
                                                            <span id="mobileError" class="text-danger"></span>
                                                        </div>


                                                        <div class="form-group col-md-6">
                                                            <label>Current Password <span
                                                                    class="required">*</span></label>
                                                            <input required="" class="form-control square"
                                                                name="password" id="password" type="password">
                                                            <span class="text-danger" id="passwordError"></span>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <button type="submit" class="btn btn-fill-out submit"
                                                                name="submit" value="Submit">Save</button>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>

                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="orders" role="tabpanel" aria-labelledby="orders-tab">
                                        <div class="card">
                                            <div class="card-header">
                                                <h5 class="mb-0">Your Orders</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="table-responsive">
                                                    <table class="table">
                                                        <thead>
                                                            <tr>
                                                                <th>Order</th>
                                                                <th>Date</th>
                                                                <th>Status</th>
                                                                <th>Total</th>
                                                                <th>Actions</th>
                                                            </tr>
                                                        </thead>
                                                        <tbody>
                                                            <tr>
                                                                <td>#1357</td>
                                                                <td>March 45, 2020</td>
                                                                <td>Processing</td>
                                                                <td>$125.00 for 2 item</td>
                                                                <td><a href="#" class="btn-small d-block">View</a></td>
                                                            </tr>
                                                            <tr>
                                                                <td>#2468</td>
                                                                <td>June 29, 2020</td>
                                                                <td>Completed</td>
                                                                <td>$364.00 for 5 item</td>
                                                                <td><a href="#" class="btn-small d-block">View</a></td>
                                                            </tr>
                                                            <tr>
                                                                <td>#2366</td>
                                                                <td>August 02, 2020</td>
                                                                <td>Completed</td>
                                                                <td>$280.00 for 3 item</td>
                                                                <td><a href="#" class="btn-small d-block">View</a></td>
                                                            </tr>
                                                        </tbody>
                                                    </table>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="add-address" role="tabpanel"
                                        aria-labelledby="add-address-tab">
                                        <div class="card">
                                            <div class="card-header">
                                                <h5 class="mb-0">Add Address</h5>
                                            </div>
                                            <div class="card-body">
                                                <form name="formAddress" id="formAddress">
                                                    <div class="row">
                                                        <div class="form-group col-md-12">
                                                            <label>House Name/No.<span class="required">*</span></label>
                                                            <input class="form-control square" name="housename"
                                                                type="text" id="housename">
                                                            <span id="house-error" class="text-danger"></span>
                                                        </div>
                                                        <div class="form-group col-md-6">
                                                            <label>Street Name <span class="required">*</span></label>
                                                            <input class="form-control square" name="streetname"
                                                                type="text" id="streetname">
                                                            <span id="street-error" class="text-danger"></span>
                                                        </div>
                                                        <div class="form-group col-md-6">
                                                            <label>Area/Locality<span class="required">*</span></label>
                                                            <input class="form-control square" name="areaname"
                                                                type="text" id="areaname">
                                                            <span id="area-error" class="text-danger"></span>
                                                        </div>
                                                        <div class="form-group col-md-6">
                                                            <label>District<span class="required">*</span></label>
                                                            <input class="form-control square" name="districtname"
                                                                type="text" id="districtname">
                                                            <span id="district-error" class="text-danger"></span>
                                                        </div>
                                                        <div class="form-group col-md-6">
                                                            <label>State<span class="required">*</span></label>
                                                            <input class="form-control square" name="statename"
                                                                type="text" id="statename">
                                                            <span id="state-error" class="text-danger"></span>
                                                        </div>
                                                        <div class="form-group col-md-6">
                                                            <label>Country<span class="required">*</span></label>
                                                            <input class="form-control square" name="countryname"
                                                                type="text" id="countryname">
                                                            <span id="country-error" class="text-danger"></span>
                                                        </div>
                                                        <div class="form-group col-md-6">
                                                            <label>PIN <span class="required">*</span></label>
                                                            <input class="form-control square" name="pin" type="number"
                                                                id="pin">
                                                            <span id="pincode-error" class="text-danger"></span>
                                                        </div>
                                                        <div class="col-md-12">
                                                            <button type="submit" class="btn btn-fill-out submit"
                                                                id="formaddressButton">Save</button>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="modal fade" id="editAddressModal" tabindex="-1"
                                        aria-labelledby="editAddressModalLabel" aria-hidden="true">
                                        <div class="modal-dialog">
                                            <div class="modal-content">
                                                <div class="modal-header">
                                                    <h5 class="modal-title" id="editCategoryModalLabel">Edit Address
                                                    </h5>
                                                    <button type="button" class="btn-close" data-bs-dismiss="modal"
                                                        aria-label="Close"></button>
                                                </div>
                                                <div class="modal-body">
                                                    <form id="editAddressForm">
                                                        <input class="form-control square" name="addressid" type="text"
                                                            id="addressid1" hidden>
                                                        <div class="form-group col-md-12">
                                                            <label>House Name/No.<span class="required">*</span></label>
                                                            <input class="form-control square" name="housename"
                                                                type="text" id="housename1">
                                                            <span id="house-error" class="text-danger"></span>
                                                        </div>
                                                        <div class="form-group col-md-6">
                                                            <label>Street Name <span class="required">*</span></label>
                                                            <input class="form-control square" name="streetname"
                                                                type="text" id="streetname1">
                                                            <span id="street-error" class="text-danger"></span>
                                                        </div>
                                                        <div class="form-group col-md-6">
                                                            <label>Area/Locality<span class="required">*</span></label>
                                                            <input class="form-control square" name="areaname"
                                                                type="text" id="areaname1">
                                                            <span id="area-error" class="text-danger"></span>
                                                        </div>
                                                        <div class="form-group col-md-6">
                                                            <label>District<span class="required">*</span></label>
                                                            <input class="form-control square" name="districtname"
                                                                type="text" id="districtname1">
                                                            <span id="district-error" class="text-danger"></span>
                                                        </div>
                                                        <div class="form-group col-md-6">
                                                            <label>State<span class="required">*</span></label>
                                                            <input class="form-control square" name="statename"
                                                                type="text" id="statename1">
                                                            <span id="state-error" class="text-danger"></span>
                                                        </div>
                                                        <div class="form-group col-md-6">
                                                            <label>Country<span class="required">*</span></label>
                                                            <input class="form-control square" name="countryname"
                                                                type="text" id="countryname1">
                                                            <span id="country-error" class="text-danger"></span>
                                                        </div>
                                                        <div class="form-group col-md-6">
                                                            <label>PIN <span class="required">*</span></label>
                                                            <input class="form-control square" name="pin" type="text"
                                                                id="pin1">
                                                            <span id="pin-error" class="text-danger"></span>
                                                        </div>
                                                        <div class="col-md-12">
                                                            <button type="submit"
                                                                class="btn btn-fill-out submit">Save</button>
                                                        </div>
                                                    </form>
                                                </div>

                                            </div>
                                        </div>
                                    </div>
                                    <div class="tab-pane fade" id="account-security" role="tabpanel"
                                        aria-labelledby="account-security-tab">
                                        <div class="card">
                                            <div class="card-header">
                                                <h5>Account Security</h5>
                                            </div>
                                            <div class="card-body">
                                                <form name="changePasswordForm" id="changePasswordForm">
                                                    <div>
                                                        <div class="form-group col-md-6">
                                                            <label>Old Password<span class="required"></span></label>
                                                            <input required="" class="form-control square"
                                                                name="oldPassword" id="oldPassword" type="password">
                                                            <span id="oldPasswordError" class="text-danger"></span>
                                                        </div>
                                                        <div class="form-group col-md-6">
                                                            <label>New Password<span class="required"></span></label>
                                                            <input required="" class="form-control square"
                                                                name="newPassword" id="newPassword" type="password">
                                                            <span id="newPasswordError" class="text-danger"></span>
                                                        </div>
                                                        <div class="form-group col-md-6">
                                                            <label>Confirm Password<span
                                                                    class="required"></span></label>
                                                            <input required="" class="form-control square"
                                                                name="confirmPassword" id="confirmPassword"
                                                                type="password">
                                                            <span id="confirmPasswordError" class="text-danger"></span>
                                                        </div>

                                                        <!-- Add more address fields as needed -->
                                                    </div>
                                                    <div class="d-flex">
                                                        <div class="col-md-4">
                                                            <button type="submit" class="btn btn-fill-out submit"
                                                                value="Submit">Save</button>
                                                        </div>
                                                </form>
                                            </div>
                                        </div>

                                    </div>
                                </div>


                            <!-- <div class="tab-pane fade  show " id="wallet" role="tabpanel"
                                aria-labelledby="wallet-detail-tab">
                                <div class="card">
                                    <div class="card-header">
                                        <h4 class="mb-0">Your Wallet <br> (Avialable Balance: <span
                                                class="text-primary"></span> )
                                        </h4>
                                    </div>
                                    <div class="card-body">
                                        <div class="table-responsive container">
                                            <table class="table" id="walletTable">
                                                <thead>
                                                    <tr>
                                                        <th>Transaction Id</th>
                                                        <th>Date</th>

                                                        <th>Amount</th>

                                                        <th>Transaction Type</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                  



                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div> -->
                                <div class="tab-pane fade" id="address" role="tabpanel" aria-labelledby="address-tab">
                                    <div class="row">
                                        <% userData.address.forEach(function(address) { %>
                                            <div class="col-lg-3">
                                                <div class="card mb-3 mb-lg-0">
                                                    <div class="card-header">
                                                        <h5 class="mb-0"> Address</h5>
                                                    </div>
                                                    <div class="card-body">
                                                        <input type="radio" class="form-check-input"
                                                            name="selectedAddress" value="<%= address._id %>">
                                                        <address>
                                                            <%= address.housename %><br>
                                                                <%= address.streetname %><br>
                                                                    <%= address.areaname %><br>
                                                                        <%= address.districtname %><br>
                                                                            <%= address.statename %><br>
                                                                                <%= address.pin %><br>
                                                        </address>
                                                        <p>
                                                            <%= address.countryname %>
                                                        </p>
                                                        <button href="#" class="btn-small"
                                                            onclick="editAddress('<%=userData._id %>','<%=address._id%>')">Edit</button>

                                                        <button href="#" class="btn-small delete-Button"
                                                            style="background-color: lightskyblue; color: black;"
                                                            onclick="deleteAddress('<%=address._id %>')">Delete</button>
                                                    </div>
                                                </div>
                                            </div>
                                            <% }); %>
                                    </div>
                                </div>

                           

                        </div>
                    </div>
                </div>
            </div>
            </div>
            </div>
        </section>



    </main>
    <!-- footer -->
    <%- include('footer') %>
    
    <!-- Preloader Start -->
    <div id="preloader-active">
        <div class="preloader d-flex align-items-center justify-content-center">
            <div class="preloader-inner position-relative">
                <div class="text-center">
                    <h5 class="mb-5">Now Loading</h5>
                    <div class="loader">
                        <div class="bar bar1"></div>
                        <div class="bar bar2"></div>
                        <div class="bar bar3"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Vendor JS-->
    <script src="/assets/js/vendor/modernizr-3.6.0.min.js"></script>
    <script src="/assets/js/vendor/jquery-3.6.0.min.js"></script>
    <script src="/assets/js/vendor/jquery-migrate-3.3.0.min.js"></script>
    <script src="/assets/js/vendor/bootstrap.bundle.min.js"></script>
    <script src="/assets/js/plugins/slick.js"></script>
    <script src="/assets/js/plugins/jquery.syotimer.min.js"></script>
    <script src="/assets/js/plugins/wow.js"></script>
    <script src="/assets/js/plugins/jquery-ui.js"></script>
    <script src="/assets/js/plugins/perfect-scrollbar.js"></script>
    <script src="/assets/js/plugins/magnific-popup.js"></script>
    <script src="/assets/js/plugins/select2.min.js"></script>
    <script src="/assets/js/plugins/waypoints.js"></script>
    <script src="/assets/js/plugins/counterup.js"></script>
    <script src="/assets/js/plugins/jquery.countdown.min.js"></script>
    <script src="/assets/js/plugins/images-loaded.js"></script>
    <script src="/assets/js/plugins/isotope.js"></script>
    <script src="/assets/js/plugins/scrollup.js"></script>
    <script src="/assets/js/plugins/jquery.vticker-min.js"></script>
    <script src="/assets/js/plugins/jquery.theia.sticky.js"></script>
    <!-- Template  JS -->
    <script src="/assets/js/maind134.js?v=3.4"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastify-js/1.6.1/toastify.min.js"></script>

    <script>
        
        // route to inner webpage code
        document.addEventListener('DOMContentLoaded', (event) => {
            const urlParams = new URLSearchParams(window.location.search);
            const tab = urlParams.get('tab');
            if (tab) {
                let newTab = new bootstrap.Tab(document.querySelector(`#${tab}-tab`));
                if (newTab) {
                    newTab.show();
                }
            }
        });



        $(document).ready(function () {
            $("#formAddress").submit(function (event) {
                const result = validateForm2();
                console.log(result+".....<<")
                event.preventDefault();
                if (result) {
                    var formData = $(this).serialize();
                    $.ajax({
                        url: "/addAddress",
                        method: "PATCH",
                        data: formData,
                        success: (response) => {
                            console.log(response);
                            if (response.success) {
                                console.log(response.success, 'form address response success...');
                                Toastify({

                                    text: `Address Added`,
                                    duration: 3000,
                                    gravity: "top",
                                    position: "center",
                                    stopOnFocus: true,
                                    style: {
                                        background: "linear-gradient(to right, aqua, blue)",
                                    },
                                }).showToast();
                                setTimeout(() => {
                                    location.reload();
                                }, 1000);

                            } else {
                                Toastify({
                                    text: `Address Added`,
                                    duration: 3000,
                                    gravity: "top",
                                    position: "center",
                                    stopOnFocus: true,
                                    style: {
                                        background: "linear-gradient(to right, red, white)",
                                    },
                                }).showToast();
                            }
                        }

                    })
                }
            })
        })


    </script>

    <script>
        $(document).ready(function () {
            // console.log("here in fuction caleed userDetailsform");
            $("#userDetailsForm").submit(function (event) {
                event.preventDefault();
                const validate = validateForm();
                console.log("userdetails form"+validate);
                if (validate) {
                    let data = $(this).serialize();
                    console.log(data + "hi")
                    $.ajax({
                        url: "/updateUser",
                        method: "PUT",
                        data: data,
                        success: (response) => {
                            if (response.status) {
                                Toastify({
                                    text: `Account Details Updated`,
                                    duration: 3000,
                                    gravity: "top",
                                    position: "center",
                                    stopOnFocus: true,
                                    style: {
                                        background: "linear-gradient(to right, aqua, blue)",
                                    },
                                }).showToast();
                                // setTimeout(() => {
                                //     location.reload();
                                // }, 1000);
                            } else {
                                document.getElementById("passwordError").innerHTML = `${response.message}`;

                            }
                        }
                    })
                }


            })
        })
    </script>

    <script>
        document.getElementById("changePasswordForm").addEventListener("submit", function (event) {
            console.log("chgepasswrd bttn pressd ejs");
            event.preventDefault();
            console.log("> change password fctn initiated <");
            const valid = validateForm1()

            if (valid) {
                console.log("its valid");
                let formdata = $(this).serialize();
                console.log("printing the formdata here >>............."+formdata);
                console.log(">serialized formdata is : < " + formdata);
                
                $.ajax({
                    
                    url: "/updatePassword",
                    method: "PUT",
                    data: formdata,
                    success: (response) => {
                        console.log("< response is ths << "+response);
                        Toastify({
                            text: "Password Updated",
                            duration: 3000, // 3 seconds
                            gravity: "top", // Display at the top of the screen
                            position: "center", // Centered horizontally
                            backgroundColor: "green", // Set the background color to green
                        }).showToast();
                        // Handle success, e.g., close the modal and refresh the page

                        setTimeout(() => {
                            location.reload();
                        }, 1000);

                    },
                    error: (xhr, status, error) => {
                        console.log(error);
                        // Handle the error and provide user feedback if necessary
                    }
                });
            }
        })

    </script>





    <script>
        function validateForm() {
            const nameRegex = /^[a-zA-Z\s]+$/;
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            const mobileRegex = /^\d{10}$/;
            const passwordRegex = /^(?=.[A-Za-z])(?=.\d)(?=.*[^A-Za-z\d]).{8,}$/;
            let isValid = true
            if (!nameRegex.test(document.getElementById("name").value)) {
                document.getElementById("nameError").innerHTML = "Invalid Format(should only contain letters and spaces.)";
                isValid = false;
            } else {
                document.getElementById("nameError").innerHTML = '';
            }
            if (!emailRegex.test(document.getElementById("email").value)) {
                document.getElementById("emailError").innerHTML = "Invalid Email";
                isValid = false;
            } else {
                document.getElementById("emailError").innerHTML = ""
            }
            if (!mobileRegex.test(document.getElementById("mobile").value)) {
                document.getElementById("mobileError").innerHTML = "Invalid Mobile Number";
                isValid = false;
            } else {
                document.getElementById("mobileError").innerHTML = ""
            }

            return isValid;
        }
    </script>

    <script>
        function validateForm1() {
            let isValid = true;
            console.log("> validateform1 <");
            const passwordRegex = /^(?=.*[A-Z])(?=.*[a-z])(?=.*\d|[^A-Za-z0-9\s])[\S]{8,}$/;

            

            if (document.getElementById("oldPassword").value.trim() === "") {
                document.getElementById("oldPasswordError").innerHTML = "Required*";
                isValid = false;
            }
            if (document.getElementById("newPassword").value.trim() === "") {
                document.getElementById("newPasswordError").innerHTML = "Required*";
                isValid = false;
            }
            if (document.getElementById("confirmPassword").value.trim() === "") {
                document.getElementById("confirmPasswordError").innerHTML = "Required*";
                isValid = false;
            }

            if (!passwordRegex.test(document.getElementById("newPassword").value)) {
                console.log("validateform1 newpassword : > "+document.getElementById("newPassword").value)
                document.getElementById("newPasswordError").innerHTML = "Password must be at least 8 characters and should contain an uppercase letter, number, or special symbol.";
                isValid = false;
            }
            if (document.getElementById("oldPassword").value.trim() === document.getElementById("newPassword").value.trim()) {
             console.log(document.getElementById("oldPassword").value);
             console.log(document.getElementById("newPassword").value);
            document.getElementById("confirmPasswordError").innerHTML = "Please enter a new password different from the old one.";
             isValid = false;
            } else if (document.getElementById("newPassword").value && document.getElementById("newPassword").value !== document.getElementById("confirmPassword").value) {
          document.getElementById("confirmPasswordError").innerHTML = "Password doesn't match";
            isValid = false;
            } else {
              document.getElementById("confirmPasswordError").innerHTML = "";
              console.log("validatefrom1 oldPassword : > "+document.getElementById("oldPassword").value);
              console.log("validatefrom1 newPassword : > "+document.getElementById("newPassword").value);
            }

            return isValid

        }

    </script>

    <script>/////////////////VALIDATION//////////////////////////
        function validateForm2() {

            const houseRegex = /^[a-zA-Z0-9\s]+$/;
            const streetRegex = /^[a-zA-Z\s]+$/;
            const areaRegex = /^[a-zA-Z\s]+$/;
            const districtRegex = /^[a-zA-Z\s]+$/;
            const stateRegex = /^[a-zA-Z ]+$/;
            const countryRegex = /^[a-zA-Z ]+$/;
            const pincodeRegex = /^\d{6}$/;
            let isValid = true;


            if (!houseRegex.test(document.getElementById("housename").value)) {
                document.getElementById("house-error").innerHTML = "Invalid Format";
                isValid = false;
            } else {
                document.getElementById("house-error").innerHTML = "";
            }

            if (!streetRegex.test(document.getElementById("streetname").value)) {
                document.getElementById("street-error").innerHTML = "Invalid";
                isValid = false;
            } else {
                document.getElementById("street-error").innerHTML = "";
            }

            if (!areaRegex.test(document.getElementById("areaname").value)) {
                document.getElementById("area-error").innerHTML = "Invalid";
                isValid = false;
            } else {
                document.getElementById("area-error").innerHTML = "";
            }

            if (!districtRegex.test(document.getElementById("districtname").value)) {
                document.getElementById("district-error").innerHTML = "Invalid";
                isValid = false;
            } else {
                document.getElementById("district-error").innerHTML = "";
            }

            if (!stateRegex.test(document.getElementById("statename").value)) {
                document.getElementById("state-error").innerHTML = "Invalid";
                isValid = false;
            } else {
                document.getElementById("state-error").innerHTML = "";
            }

            if (!countryRegex.test(document.getElementById("countryname").value)) {
                document.getElementById("country-error").innerHTML = "Invalid";
                isValid = false;
            } else {
                document.getElementById("country-error").innerHTML = "";
            }

            if (!pincodeRegex.test(document.getElementById("pin").value)) {
                document.getElementById("pincode-error").innerHTML = "Invalid Pincode (should be 6 digits)";
                isValid = false;
            } else {
                document.getElementById("pincode-error").innerHTML = "";
            }

            return isValid;
        }
        document.getElementById("formButton").addEventListener("click", (e) => {
            const result = validateForm2();
            console.log(result)

            if (!result) {
                e.preventDefault();
            }
        })
    </script>

    <script>////////MODAL////////////////
        function editAddress(userId, addressId) {
            console.log("clicked addressEdit", userId, addressId);
            $.ajax({
                url: "/addressEditor/" + userId + "/" + addressId,
                method: 'GET',
            })
                .done((response) => {
                    console.log("this is ajax for add modal", response);
                    if (response) {
                        document.getElementById('addressid1').value = response.addressData._id;
                        document.getElementById('housename1').value = response.addressData.housename;
                        document.getElementById('streetname1').value = response.addressData.streetname;
                        document.getElementById('areaname1').value = response.addressData.areaname;
                        document.getElementById('districtname1').value = response.addressData.districtname;
                        document.getElementById('statename1').value = response.addressData.statename;
                        document.getElementById('countryname1').value = response.addressData.countryname;
                        document.getElementById('pin1').value = response.addressData.pin;
                        $("#editAddressModal").modal("show");

                    }
                })
                .fail((error) => {
                    console.log(error);
                })

        }


    </script>

    <script>
        ///////////////////EDIT-IN-MODAL////////////////////
        document.getElementById("editAddressForm").addEventListener("submit", function (event) {
            event.preventDefault();
            let formdata = $(this).serialize();
            let addressId = $(this).find('input[name="addressid"]').val();
            console.log("address id :", addressId)
            $.ajax({
                url: "/editAddress/" + addressId,
                method: "PUT",
                data: formdata,
                success: (response) => {
                    console.log("response got here in ajax -- "+response);
                    Toastify({
                        text: "Address Updated",
                        duration: 3000,
                        gravity: "top",
                        position: "center",
                        backgroundColor: "green",
                    }).showToast();

                    $("#editAddressModal").modal("hide");
                    setTimeout(() => {
                        location.reload();
                    }, 1000);

                },
                error: (xhr, status, error) => {
                    console.log(error);

                }
            });
        })
    </script>

    <script>
        const deleteAddress = (addressId) => {
            console.log('> inside the deleteaddrss swalfire <');
            Swal.fire({
                title: 'Are you sure?',
                text: 'You will not be able to recover this address!',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonText: 'Yes, delete it!',
                cancelButtonText: 'Cancel',
                reverseButtons: true,
            }).then((response) => {
                console.log(response);

                if (response.isConfirmed) {
                    console.log(response.isConfirmed);
                    
                    $.ajax({
                        url: `/deleteAddress/${addressId}`,
                        type: 'PUT'
                    }).done(response => {
                        Swal.fire("Successfull", `Address Deleted`, "success").then(() => {
                            location.reload();
                        })
                    }).fail((error) => {
                        Swal.fire("Successfull", `${error.responseJSON.message}`, "success").then(() => {
                            location.reload()
                        })
                    })
                }
            })
        }

    </script>

</body>


<!-- Mirrored from wp.alithemes.com/html/evara/evara-frontend/page-account.html by HTTrack Website Copier/3.x [XR&CO'2014], Sat, 15 Jul 2023 10:11:15 GMT -->
</html>